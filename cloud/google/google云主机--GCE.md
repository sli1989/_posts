---
title: google云主机---GCE
date: 2018-01-25 03:08:53
tags: ["cloud","google","GPU","computer engine"]
categories:
- cloud
---

### 简介

[GCP 免费方案](https://cloud.google.com/free/?hl=zh-cn)
送您 $300 赠金和 12 个月免费试用期，帮助您顺利上手。更有“始终免费”*产品助您一路前行。
*随时可能更改
![default](https://user-images.githubusercontent.com/13825126/35475026-57ca6be4-03d2-11e8-9551-9af4410e254b.PNG)



只要绑定信用卡就送300刀，能免费用一年
<image src="https://user-images.githubusercontent.com/13825126/35471148-9fda0c4c-0390-11e8-8167-6484aac58ab5.PNG" />

[GCP控制台](https://console.cloud.google.com/?hl=zh-cn)

### 开通
google云只支持以下几种信用卡。不支持中国银联
2: masterCard
3: 美国运通或JCB
4:: visa
5:mastercard

开通后，消费1美元，是什么意思？ (先消费1美元，再撤销1美元)
### 价格& 配置

**综述**：GCE是主机部分按时间计费的，网络部分是按流量计费的，跟AWZ一样
（与cpu和内存使用率无关，那就可劲用吧）
(时间是使用时间，还是申请时间？关机算时间吗？关机不收费，那可以多开几个vm)
(流量是怎么算？下载conda，软件包也算流量？)

GCE 的价格比较亲民，最低配 1 共享核-0.6 GB 内存-10GB HDD 每月只需要不到 5 美元，而且由于 CPU、内存大小和磁盘大小都是可调的，所以可以根据自己的需要去购买最适合的，能省去不必要的开销。

| GCE服务内容                 | 估算费用     | 折扣         | 总计       | 备注                                   |
|-----------------------------|--------------|--------------|------------|----------------------------------------|
| 1 个共享 vCPU + 0.6 GB 内存 | $5.55/月     | - $1.66/月   | $4.28/月   | 内存小了点                             |
| 1 个共享 vCPU + 1.7 GB 内存 | $19.71/月    | - $5.91/月   | $14.20/月  |                                        |
| 1 个 vCPU + 3.75 GB 内存    | $34.67/月    | - $10.40/月  | $24.67/月  |                                        |
| 2 个 vCPU + 7.5 GB 内存     | $69.35/月    | - $20.81/月  | $48.95/月  |                                        |
| ..                          |              |              |            |                                        |
| 10 GB 标准永久性磁盘        | $0.40/月     |              |            |                                        |
|                             |              |              |            |                                        |
| 1 个 GPU NVIDIA Tesla K80   | $328.50/月   | - $108.95/月 | $254.62/月 | 1. 共享 vCPU 不支持 GPU                |
| 1 个 GPU NVIDIA Tesla P100  | $1,065.80/月 | - $330.14/月 | $770.73/月 | 2. 简直敲诈，不如自己买。另外仅特定区域才有GPU支持 |


不同地区价格有差异，**美国服务器价格最便宜**，亚洲欧洲比美国本土贵点。

**可用性策略**
- 抢占：该模式能够获得更低廉的价格，但是不能用做需要长期保持在线的服务（比如 Web 服务），它最长的使用期限是 24 小时，然而在我的使用中，它有时候不到 1 小时就会被终止使用。它只适合短时间去计算一些东西，计算完后中止它，平常的一般使用不要开启此功能。
- 自动重启：推荐开启，以获得在云端的好处，以及更好的 Uptime
- 主机维护期间：推荐选择 “迁移”，原因同上
- IP 转发：建议关闭，几乎不会用得着此功能，关闭有助于提高安全性
- SSH：这可能不同于其他一些 VPS，它默认不自动生成用户密码，所以为了远程登录必须配置好公钥私钥。而且所填写的公钥末尾的用户名是有作用的，所填写的用户名就是所需要登录的用户名，默认不支持 root 登陆，除非你将用户名设置成了 root。

**流量**
流量的话对于所有的可用区，连中国大陆 $0.23/Gbyte、美欧地区 $0.12/Gbyte，流量的价格有些小贵，但是如果是连接 Google 自己的服务的话（包括但不限于 Gmail、YouTube），流量不计费（但是流量是双向的，所以是本地通过 GCE 上传完全免费，下载还是原价）。
流量另算钱，起步50g，因此最低配只要不超流量就可以用上一年。








GCE 还有一点比较特殊的是它是按分钟计费的，当服务处于终止状态（相当于关机，磁盘数据保留）时，不收取费用（除了少量的磁盘使用费用）。每次计算 Uptime 时，如果不到 10 分钟则一律按十分钟算，超过 10 分钟后才是真正的按分钟计费，不过还是很划算了




## ssh 登录

**首先在浏览器窗口中打开ssh**

![default](https://user-images.githubusercontent.com/13825126/35474073-05e92d82-03c4-11e8-8db5-3fe45a631a50.PNG)

1. 创建实例后设置当前用户的新密码

```ssh
$ sudo passwd ${whoami} // 下面以 user 代替 ${whoami}
# 输入新密码
```

设置下 root 的新密码
```
$ sudo passwd root
# 输入新密码
```
**在本地生成私钥和公钥**

**复制公钥**

**导入公钥到google VM**
方法一：
```
进入谷歌云平台页面 -> 计算引擎 -> 元数据 -> SSH 密钥，粘贴保存
 谷歌就会把上面这段 public key 写入到 ~/.ssh/authorized_keys
```
```sh
$ cat ~/.ssh/authorized_keys
```
cat ~/.ssh/authorized_keys文件，检查是否已经存在了刚刚的公钥

如果不work。就手动生成这个文件，然后拷贝public key

**本地通过 SSH 密码验证登录**



### 用途



**VPS**


**代理**

**web应用主机**


### GCE 云主机
google computer engine

Compute Engine 可让您使用在 Google 基础架构上运行的虚拟机。从微型 VM 到运行 Debian、Windows 或其他标准映像的大型虚拟机一应俱全。创建您的第一个 VM 实例并通过 CloudEndure 迁移服务导入该实例，或通过快速入门指南构建示例应用。

据说GCE 在国内经常不稳定

GCE 的后台配置页面虽不能在中国访问，但是其 GCE 实例是可以在中国访问的。(什么意思？)



## 评价

速度超快，下载tensorflow 116MB/s




### reference
https://guozeyu.com/2016/10/asia-google-compute-engine/
[SSH 连接配置](https://www.jianshu.com/p/57e85cf3e50b)

### app engine 云应用







[谷歌云平台](https://console.cloud.google.com/home/dashboard)
