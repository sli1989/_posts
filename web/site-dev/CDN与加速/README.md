---
title: CDN原理
date: 2018-01-25
keywords: ["domain","域名","web","网站","建站","备案","注册量","排名","发展史"]
tags: ["domain","域名","web"]
categories:
- web
- site-dev
---



## CDN比较

开源CDN https://www.jsdelivr.com/


|               | CDN服务                     | CDN方式                                   | 备注         | SSL证书                                                | 费用 | 有效期          | 限制                                     | DNS服务                                    | Analytics | Firewall |
|---------------|-----------------------------|-------------------------------------------|--------------|--------------------------------------------------------|------|-----------------|------------------------------------------|--------------------------------------------|-----------|----------|
| Let's Encrypt |                             |                                           |              | Let's Encrypt                                          | 免费 | 3个月，手动续期 |                                          |                                            |           |          |
| cloudflare    |                             | 强制采用cloudflare的name server。有点霸道 | 无法双线部署 | COMODO CA Limited                                      | 免费 | 6个月           | 必须要使用cloudfare的nameserver          | 没有线路配置(比如国内外配置，移动联通配置) | √         | √        |
| Netlify       |                             |                                           |              |                                                        |      |                 |                                          |                                            |           |          |
| ucloud        |  由网宿提供，目前不支持 SSL |                                           |              |                                                        |      |                 |                                          |                                            |           |          |
| 七牛          |                             |                                           |              |                                                        |      |                 |                                          |                                            |           |          |
| 又拍云        |                             | CNAME解析到又拍云(.aicdn.com)             |              | Symantec、GeoTrust、TrustAsia、Let's Encrypt四种证书。 |      | 自动续期        | 要实名、域名要备案。否则不能用CDN和SSL。 |                                            |           |          |
|               |                             |                                           |              |                                                        |      |                 |                                          |                                            |           |          |
|               |                             |                                           |              |                                                        |      |                 |                                          |                                            |           |          |
|               |                             |                                           |              |                                                        |      |                 |                                          |                                            |           |          |



## 什么是回源？ 为什么要回源？

在搜索引擎中所谓的 `域名回源`就是搜索引擎的蜘蛛在爬行的过程中直接`抓取源地址上的内容`而不是存在各个节点（CDN）上的缓存内容。


源站内容有更新的时候，源站主动把内容推送到CDN节点。
常规的CDN都是回源的。即：当有用户访问某一个URL的时候，如果被解析到的那个CDN节点没有缓存响应的内容，或者是缓存已经到期，就会回源站去获取。如果没有人访问，那么CDN节点不会主动去源站拿的。

回源域名一般是cdn领域的专业术语，通常情况下，是直接用ip进行回源的，但是如果客户源站有多个ip，并且ip地址会经常变化，对于cdn厂商来说，为了避免经常更改配置（回源ip），会采用回源域名方式进行回源，这样即使源站的ip变化了，也不影响原有的配置。

CDN本来是给我们的网站加速的，但是有时会因为`不合适的回源策略给服务器带来负担`，只有选择正确的策略才能给自己的网站带来更高的访问效率。

[别让CDN的回源把你的服务器拖垮](http://blog.51cto.com/storysky/283145)


## CDN配置

[又拍云 CDN配置](http://docs.upyun.com/cdn/guide/#_12)

## 分类 & 目录

https://cloud.tencent.com/product/lh

- 静态内容加速
- 下载分发加速
- 音视频点播加速
- 动态加速网络
- 全球应用加速

## 缓存验证

如何测试CDN 加速平台上的缓存配置是否生效？

http://docs.upyun.com/cdn/guide/#_12

# 图床 VS CDN
