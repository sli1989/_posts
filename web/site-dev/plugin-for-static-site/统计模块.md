---
title: 为静态网站提供动态服务之 统计模块
date: 2018-03-21
tags: ["静态网站", "插件","动态服务"]
---

# 汇总  对比

site_uv 是指访问的用户个数，一个IP记一次，多次访问不累加
site_pv 是网站访问次数，多次访问累加
page_pv 是文章点击次数，多次访问累加




|      | google统计 | 百度统计 | Leancloud.cn | 不蒜子                     |   |   |   |
|------|------------|----------|--------------|----------------------------|---|---|---|
| 特点 |            |          | 功能繁杂     | 轻量级，无需注册，两行代码 |   |   |   |
|      |            |          | 要注册       |                            |   |   |   |
| 功能 |            |          |              | pv uv                      |   |   |   |
|      |            |          |              |                            |   |   |   |
|      |            |          |              |                            |   |   |   |






## 速度 对比

不蒜子的js放在七牛，速度应该不慢，如果说速度慢，可能是七牛的原因，



## 初始化首次数据

初始化首次数据无非就两种方式
1. 修改服务器的数据库数据 (多数不提供该服务，因为随意篡改数据就失去了数据权威性)
1. 仅更改本网站的显示 (so easy，也可以理解成自己欺骗自己)

首先看方式二：以不蒜子为例

在html中引入以下js
```js
<!-- 修正不蒜子计数初始值 -->
    <script >
        $(document).ready(function() {
            var int = setInterval(fixCount, 50);  // 50ms周期检测函数
            var countOffset = 20000;  // 初始化首次数据
           function fixCount() {                   
             if ($("#busuanzi_container_site_pv").css("display") != "none")
               {
                  $("#busuanzi_value_site_pv").html(parseInt($("#busuanzi_value_site_pv").html()) + countOffset); // 加上初始数据
                  clearInterval(int); // 停止检测
             }  
         }           
        });
    </script>
```


这里的方法是改给自己看，并未改动busuanzi的数据库。

方式一，看各家提供的接口咯


### 不蒜子的方式


> “不蒜子”与百度统计谷歌分析等有区别：“不蒜子”可直接将访问次数显示在您在网页上（也可不显示）；对于已经上线一段时间的网站，“不蒜子”允许您初始化首次数据。
> 请先注册登录，自行修改阅读次数。
> --- 来自不蒜子官网

然而，至今不蒜子尚未提供注册服务(2018年3月)，也就是不蒜子暂时也不提供 `修改统计数据的接口`。


实际上并未改初始化首次数据的方式。因为




# 单独介绍

## 不蒜子

“不蒜子”是通过页面url（或者主机名神马的）来标识一个计数值，而像localhost、index.html这样的名字早已经被像我们一样的广大程序猿在测试时用烂了，自然就累计了好多次
